let forms=document.querySelectorAll("form");forms.forEach((function(e){e.addEventListener("click",(function a(){dataLayer.push({event:"formEngagement"}),e.removeEventListener("click",a)}))})),Genesys("subscribe","Conversations.started",(function(){dataLayer.push({event:"chatOpen"})})),Genesys("subscribe","MessagingService.messagesReceived",(function({data:e}){const a=e,n=a?.messages?.[0]?.text,s=window.location.hostname,t=s.includes(".co.nz")||s.includes("peninsula-anz-nz"),c=s.includes(".com.au")||s.includes("peninsula-anz-au"),i=n?.match(/[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);i&&dataLayer.push({event:"chatEmailCapture",email:i});const o=n?.match(/(\+?\d{1,3})?[\s\-]?\(?\d+\)?[\s\-]?\d+[\s\-]?\d+/);if(o){let e=o[0].replace(/[^\d+]/g,""),a="";e.startsWith("0")?c?(a="AU",e="+61"+e.slice(1)):t&&(a="NZ",e="+64"+e.slice(1)):e.startsWith("+")||(c?e="+61"+e:t&&(e="+64"+e)),dataLayer.push({event:"chatPhoneCapture",hostname:s,phoneNumber:e,country:a})}}));
