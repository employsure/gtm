let forms=document.querySelectorAll("form");forms.forEach((function(e){e.addEventListener("click",(function t(){dataLayer.push({event:"formEngagement"}),e.removeEventListener("click",t)}))})),Genesys("subscribe","Conversations.started",(function(){dataLayer.push({event:"chatOpen"})})),Genesys("subscribe","MessagingService.messagesReceived",(function({data:e}){const t=e,s=t?.messages?.[0]?.text,a=window.location.hostname,n=a.includes(".co.nz"),c=a.includes(".com.au"),r=s?.match(/[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);r&&dataLayer.push({event:"chatEmailCapture",email:r});const i=s?.match(/(\+?\d{1,3})?[\s\-]?\(?\d+\)?[\s\-]?\d+[\s\-]?\d+/);if(i){let e=i[0].replace(/[^\d+]/g,""),t="";e.startsWith("0")?c?(t="AU",e="+61"+e.slice(1)):n&&(t="NZ",e="+64"+e.slice(1)):e.startsWith("+")||(c?e="+61"+e:n&&(e="+64"+e)),dataLayer.push({event:"chatPhoneCapture",phoneNumber:e,country:t})}}));
