let forms=document.querySelectorAll("form");forms.forEach((function(e){e.addEventListener("click",(function t(){dataLayer.push({event:"formEngagement"}),e.removeEventListener("click",t)}))})),Genesys("subscribe","Conversations.started",(function(){dataLayer.push({event:"chatOpen"})})),Genesys("subscribe","MessagingService.messagesReceived",(function({data:e}){const t=e,s=t?.messages?.[0]?.text,a=window.location.hostname,n=a.includes(".co.nz"),c=a.includes(".com.au"),i=s?.match(/[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);i&&dataLayer.push({event:"chatEmailCapture",email:i});const r=/(\+?61|0)?4\d{8}/,o=/(\+?64|0)?2\d{7,9}/;let l=null,u=null;if(c){if(l=s?.match(r),l){let e=l[0].replace(/[\s-]/g,"");u=e.startsWith("0")?"+61"+e.slice(1):e.startsWith("+61")?e:"+61"+e}}else if(n&&(l=s?.match(o),l)){let e=l[0].replace(/[\s-]/g,"");u=e.startsWith("0")?"+64"+e.slice(1):e.startsWith("+64")?e:"+64"+e}u&&dataLayer.push({event:"chatPhoneCapture",phoneNumber:u})}));
